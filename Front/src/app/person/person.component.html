<div class="search">
    <mat-form-field class="full-width">
        <mat-label>Search by name:</mat-label>
        <input matInput [(ngModel)]="search" (keyup)="applyFilter()">
    </mat-form-field>
</div>

<!--app-table [dataSource]="filteredDataSource" [displayedColumns]="displayedColumns" (rowClick)=setPerson($event)></app-table-->
<table mat-table matSort [hidden]="!loaded" [dataSource]="dataSource" class="mat-elevation-z4 full-width">

    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
        <td mat-cell *matCellDef="let element"> {{ element.id }} </td>
    </ng-container>

    <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
        <td mat-cell *matCellDef="let element"> {{ element.name }} </td>
    </ng-container>

    <ng-container matColumnDef="cpf">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> CPF </th>
        <td mat-cell *matCellDef="let element"> {{ element.cpf }} </td>
    </ng-container>

    <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
        <td mat-cell *matCellDef="let element"> {{ element.email }} </td>
    </ng-container>

    <ng-container matColumnDef="phone">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone </th>
        <td mat-cell *matCellDef="let element"> {{ element.phone }} </td>
    </ng-container>

    <ng-container matColumnDef="birthday">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Birthday </th>
        <td mat-cell *matCellDef="let element"> {{ element.birthday | date:"yyyy-MM-dd" }} </td>
    </ng-container>

    <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef> Action </th>
        <td mat-cell *matCellDef="let element">
            <a routerLink="">
                <mat-icon class="orange mr-10">edit</mat-icon>
            </a>
            <a routerLink="">
                <mat-icon class="red">delete</mat-icon>
            </a>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="pointer" [ngClass]="row?.id == personForm?.id ? 'gray':''" (click)="setPerson(row) "></tr>
</table>

<mat-spinner *ngIf="!loaded" [color]="'#000'" class="spinner"></mat-spinner>

<mat-paginator [hidden]="!loaded" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
    <mat-slide-toggle style="position: absolute;" [color]="'primary'">
        <mat-icon>lock</mat-icon>
    </mat-slide-toggle>
</mat-paginator>


<mat-slide-toggle [color]="'primary'">
    <mat-icon>lock</mat-icon>
</mat-slide-toggle>

<form class="person-form">
    <mat-form-field class="full-width">
        <mat-label>Name</mat-label>
        <input matInput placeholder="Ex. JoÃ£o Silva" value="" [(ngModel)]="personForm.name" name="name">
    </mat-form-field>

    <mat-form-field class="full-width">
        <mat-label>CPF</mat-label>
        <input matInput placeholder="Ex. 000.000.000-00" [(ngModel)]="personForm.cpf" name="cpf">
    </mat-form-field>

    <mat-form-field class="full-width">
        <mat-label>Email</mat-label>
        <input type="email" matInput placeholder="Ex. joaosilva@email.com" [(ngModel)]="personForm.email" name="email">
    </mat-form-field>

    <mat-form-field class="full-width">
        <mat-label>Phone</mat-label>
        <input type="tel" matInput placeholder="Ex. (11)90000-0000" [(ngModel)]="personForm.phone" name="phone">
    </mat-form-field>

    <mat-form-field class="full-width">
        <mat-label>Birthday</mat-label>
        <input matInput [matDatepicker]="picker" [(ngModel)]="personForm.birthday" name="birthday" placeholder="dd/mm/yyyy">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
</form>

<div class="flex-botoes">
    <button mat-raised-button (click)=ngOnInit()>List all</button>
    <button mat-raised-button class="green" (click)=addPerson()>Add person</button>
    <button mat-raised-button color="primary" (click)="updatePerson()" [disabled]="!personForm?.id">Edit</button>
    <button mat-raised-button color="warn" (click)=deletePerson()>Delete</button>
</div>